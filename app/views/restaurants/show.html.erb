<h1><%= @restaurant.name %></h1>
<ul class="restaurant_info">
  <li>
    <%= @restaurant.address %>
  </li>
  <li>
    <%= @restaurant.city %>
    <%= @restaurant.state %>
    <%= @restaurant.zip_code %>
  </li>
</ul>
<div>
  <ul>
    <% unless @restaurant.reviews.empty? %>
    <li><h2>Reviews:</h2></li>
    <br>
    <%= paginate @reviews %>
    <% @reviews.each do |review| %>
      <table>
        <tr>
          <td>
            <h4>
              <%= review.user.username.capitalize %>
            </h4>
          </td>
          <% if current_user == review.user %>
            <td>
              <%= link_to "Edit Review", edit_review_path(review) %>
            </td>
            <td>
              <p><%= button_to "Delete Review", restaurant_review_path(@restaurant, review.id), method: :delete, data:
              {confirm: "Are you sure you want to delete this review?"}%></p>
            </td>
          <% end %>
        </tr>
        <tr>
          <td>Ratings</td>
          <td>Comments</td>
        </tr>
        <tr>
          <td>
            <ul>
              <li>Value: <%= review.value %></li>
              <li>Proximity: <%= review.proximity %></li>
              <li>Volume: <%= review.volume %></li>
              <li>Originality: <%= review.originality %></li>
            </ul>
          </td>
          <td><%= review.body %></td>
          <td>
            <% if current_user %>
              <%= link_to like_restaurant_review_path(@restaurant, review), class: "button upvote" do %>
                &#9650;<span id="<%= review.id %>-upvotes"><%= review.get_upvotes.size %></span>
              <%- end -%>
              <%= link_to dislike_restaurant_review_path(@restaurant, review), class: "button downvote" do %>
                &#9660;<span id="<%= review.id %>-downvotes"><%= review.get_downvotes.size %></span>
              <%- end -%>
            <%- else -%>
              <div class="button">
                &#9650;<span id="<%= review.id %>-upvotes"><%= review.get_upvotes.size %></span>
              </div>
              <div class="button">
                &#9660;<span id="<%= review.id %>-downvotes"><%= review.get_downvotes.size %></span>
              </div>
            <%- end -%>
          </td>
        </tr>
      </table>
    <% end %>
  <% end %>
</div>
<% if current_user %>
  <%= render 'reviews/form' %>
<% end %>
